<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>PrivEsc</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>PrivEsc</h1><br/><p><h1>Methodology</h1><h1>:</h1><ul><li>Don&#39;t stop Enum after finding potential PrivEsc vectors. Take note of them, but <span style="color:#ff0000;">finish recon before exploitation</span>.</li></ul></p><p><ul><li><span style="color:#ff0000;">After obtaining Admin/Root</span> on a target, don&#39;t immediately pivot to the next machine. Elevated privleges let you examine areas of the system that may have been previously inaccessible, so <span style="color:#ff0000;">Enum again</span> (e.g Linpeas)</li></ul></p><p><ul><li>If you can&#39;t PrivEsc, but you can pivot, <span style="color:#ff0000;">you may need to “zig-zag” </span>&amp; return to this machine later. Other hosts could contain the info you need to <a href="PrivEsc_8.html">PrivEsc</a> here (e.g creds).</li></ul></p><p><ul><li>May need to <span style="color:#ff0000;">use &gt;1 Acct for PrivEsc</span>. For ex, 1 Acct has R/W perms over a directory &amp; another has a sudo cmd that uses that directory (e.g. Tar Wildcard); use the 1st Acct to create payload &amp; the 2nd to trigger it. </li></ul></p><p></p><p><h1>Cheesy Methods</h1></p><p>Some methods are extremely easy to use &amp; affect a large number of targets, so I&#39;m calling them the “Cheese Methods”</p><p></p><p><h2>Windows</h2></p><p><a href="PrivEsc--Windows_9.html#Cert Dialog">Certificate Dialog Vulnerability</a></p><p></p><p><h2>Linux</h2></p><p><a href="PrivEsc--Linux_29.html#Uber Cheese">Abusing SSH + pkttyagent</a></p><p></p><p><h1>Decrypt Firefox Credentials</h1></p><p>[CTF B 93]</p><p></p><p><h1>File Transfers</h1></p><p><a href="https://book.hacktricks.xyz/generic-methodologies-and-resources/exfiltration">Methods</a> for both Windows &amp; Linux targets.</p><p></p><p><h1>Reverse Shell Listener</h1></p><p>Experiement with rlwrap arguments like-</p><p></p><p><em>rlwrap --prompt-colour=red --complete-filenames --ansi-colour-aware --history-no-dupes 2 --logfile /dev/shm/razorback/rlwrap.log --remember --substitute-prompt &#39;nc &gt; &#39; nc -lvnp 9999</em></p><p></p><p><span style="color:#060f94;text-decoration:underline;">Q</span>: By changing the prompt, does that remove the ability to see user&#39;s pwd?</p><p></p><p></p><p><h1>Tips</h1><ul><li>Even if you get RCE as an Acct, you may not have their passwd. You may be able to leverage RCE (or a Web App running under that Acct) to obtain their hash (i.e trigger SMB connection to <a href="Misc_Attacks--Network_Attacks_14.html#capture ntlm">capture their NTLMv2 hash</a>)</li></ul></p><p><ul><li><span style="color:#ff0000;">Diff methods</span> <span style="color:#ff0000;">of RCE</span> may give you <span style="color:#ff0000;">access to diff accounts</span>! For example, [OSCP 229]</li></ul></p><p></p><p>VestaCP Web App lets you create Cron Jobs for RCE as Jack, but can&#39;t PrivEsc from him. A <span style="color:#ff0000;">Github PoC</span> (<span style="color:#ff0000;">Not on Exploit-db</span>) gives RCE as root.</p></div>
</body>
</html>
