<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>General</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>General</h1><br/><p><h1>OSCP Warning</h1><ul><li><span style="color:#ff0000;">Revert machines</span> at start of exam! May need to revert them again later on if they&#39;re not giving expected results, are super laggy, etc (e.g may not show all ports open that they should show. Maybe a prev exploit attempt messed with them).</li></ul></p><p><ul><li> <span style="color:#ff0000;"> Don&#39;t increase speed of scans</span> too much (e.g use def speed for nmap). Could miss things, or cause instability on target. May even slow down all but 1 scan (e.g <em>-T2</em> can make it extremly slow, but omitting some of <em>-A </em>features may also help)</li></ul></p><p><ul><li><em>autorecon</em> may be helpful for speed, but some reccomend using <span style="color:#ff0000;">manual Enum</span> alongside/instead of it. <strong>Seems to miss things &amp; output is hard to parse</strong> (use cmds like <span style="color:#ff0000;">nmap w/ targets.txt file instead?)</span></li></ul></p><p><ul><li>Keep track of what flags you&#39;ve obtained/submitted &amp; for which machines</li></ul></p><p></p><p>•(?) <span style="color:#e01b24;">REVERTING</span> causes <span style="color:#e01b24;">target to generate NEW FLAGS</span>. Need to submit the current flags!</p><p></p><p></p><p><h1>Methodology</h1><ul><li>Fatigure can slow you down FAR more than a break, &amp; cause time consuming mistakes.</li></ul></p><p><ul><li>If stuck, 2x-3x check EVERYTHING, potentially after taking a break. Catching stupid mistake is faster than checking/researching more complex stuff (see “<a href="General_6.html#Common Mistakes">Common Mistakes</a>”).</li></ul></p><p><ul><li> <span style="color:#ff0000;"> Some payloads need to be run &gt;1 time </span>before they *magically* work. In some cases, could be bc target is laggy but other times no clear reason. Keep retrying it (esp if target is responsive) while looking for diff Atk Vectors &amp; perform sanity checks in btwn attempts</li></ul></p><p><ul><li>If possible, give IPs a domain name in <em>/etc/hosts</em>, so you&#39;ll be able to use the domain name for things like <strong>iptables</strong> &amp; will be less likely to make a typo. However,<span style="color:#ff0000;"> in some cases a domain name will give diff results</span> than an IP (i.e Web Apps).</li></ul></p><p></p><p><h2>Target Selection</h2></p><p>Start with low hanging fruit (for SVCs &amp; for hosts themselves). For ex, SVCs like FTP &amp; SMB are much quicker to check than a WebApp (but may need to return to FTP &amp; SMB again later also).</p><p></p><p>The <span style="color:#ff0000;">order by which you interact with SVCs may matter</span>! Try re-checking after doing things (especially for SVCs that store files or other data (e.g memcached, redis, etc)</p><p></p><p></p><p><a name="Common Mistakes"></a><h1>Common Mistakes</h1><ul><li>Forgot to make FW rule to let R. Shell connect, or made typo in FW rule. Verify you can connect by using something like <strong>ping -n 5 </strong>or <strong>ping -c 5</strong> (Win vs Nix) on target &amp; <strong>tcpdump -i &lt;interface&gt; icmp</strong>. However, target may&#39;ve odd FW rules that limit certain external traffic which could interfere with results of test.</li></ul></p><p><ul><li>Read through port scans carefully, especially for <span style="color:#ff0000;">weird Windows ports</span>. For ex, the former isn&#39;t an accessible webserver (WinRM), but the latter is accessible only when using proper Domain Name in /etc/hosts!</li></ul></p><p></p><p>5985/tcp  open  http          syn-ack ttl 125 Microsoft HTTPAPI httpd 2.0 (SSDP/UPnP)</p><p>|_http-server-header: Microsoft-HTTPAPI/2.0</p><p>|_http-title: <strong>Not Found</strong></p><p></p><p>14080/tcp open  http          syn-ack ttl 125 Microsoft HTTPAPI httpd 2.0 (SSDP/UPnP)</p><p>|_http-server-header: Microsoft-HTTPAPI/2.0</p><p>|_http-title:<strong> Bad Request</strong></p><p><ul><li><span style="color:#ff0000;">Try diff PoCs for same vuln</span>! Even if some PoCs don&#39;t work, others might. Some exploits may give diff privs than others.</li></ul></p><p> <ul><li>Don&#39;t ignore <em>linpeas</em> <strong>probable</strong> exploits, even if more probable exploits don&#39;t work!</li></ul></p><p><ul><li>Entered <span style="color:#ff0000;">wrong IP</span>. Especially easy when there are multiple hosts in the same Net with very similar IPs! Helps to add Domain Name in<strong> /etc/hosts</strong></li></ul></p><p><ul><li><span style="color:#ff0000;">Some payloads only work with URL-Encoding</span> &amp; <span style="color:#ff0000;">others only work w/o it</span>. depending on the context.</li></ul></p><p><ul><li><span style="color:#ff0000;">Even Linux hosts may restrict certain ports</span>, so always test payloads using common ports (e.g 443) &amp;/or ports that the host uses for other SVCs (I&#39;ve had good luck using listeners on ports that the target also listens on).</li></ul></p><p><ul><li>Can fuzz nginx for subdirs, even if parent dirs are Forbidden!</li></ul></p><p><ul><li>Didn&#39;t try enough wordlists for fuzzing</li></ul></p><p><ul><li>Make sure you&#39;re copy pasting passwords correctly! It&#39;s easy to leave off a character.</li></ul></p><p></p><p><h1>Tips</h1><ul><li><strong>sudo </strong><strong><span style="color:#ff0000;">tcpdump</span></strong><strong> -i tun0 icmp</strong> is great way to test RCE before real payload. <span style="color:#ff0000;">Possible for target&#39;s FW to block</span> outgoing pings, but unlikely. <em>ping -n 3</em> (Win) or<em> ping -c 3</em> (Linux)</li></ul></p><p><ul><li>Certain contexts have specific requirements for <span style="color:#ff0000;">special char encoding</span>.</li></ul></p><p>For ex, (Maybe I just messed it up somehow &amp; normal encoding would&#39;ve worked?) Normal URL-Encoding via burp or urlencoder.org didn&#39;t work, but payload using Python&#39;s <strong>urllib.parse.quote </strong>did.</p><p>_______</p><p><h1>Search for CTF Notes</h1></p><p>If you know a tool or subject that was relevant to a CTF, &amp; remember where you did the CTF, can use Google Dorking to find the name of that CTF &amp; cross-reference that with Table of Contents. For example, using dorksearch:</p><p></p><p><strong>intext:firefox_decrypt intitle:tryhackme</strong></p></div>
</body>
</html>
