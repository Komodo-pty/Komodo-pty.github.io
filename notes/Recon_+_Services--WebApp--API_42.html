<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>API</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>API</h1><br/><p><h1>Web Apps vs APIs</h1></p><p>APIs are often used with Web Apps, &amp; therefore accessible via browser, but not always. Ordinary websites are designed for human interaction, whereas APIs are built for other machines to interact with. Therefore,</p><p><ul><li>APIs have <span style="color:#ff0000;">very specific endpoints</span>.</li></ul></p><p><ul><li>Web Apps return views (i.e rendered webpages) while an API will often return straight data (i.e <strong>JSON</strong>).</li></ul></p><p><ul><li>A Web App may integrate an API, routing certain traffic through the API so it can handle that specialized functionality.</li></ul></p><p><ul><li>Web Apps typically use common locations for Web Root (e.g. <strong>/var/www/html/</strong>), but the API may store its files in a different place!</li></ul></p><p><ul><li>APIs may not show up on a port scan, because they sometimes are only listening at localhost (e.g. external users interact with the Web App, &amp; the Web App makes Requests to the local API Server).</li></ul></p><p><ul><li>Requests sent to an API may have to be in <strong>Content-Type: application/json</strong>. Get a baseline with an empty Body message<strong> {&quot;&quot;:&quot;&quot;}</strong></li></ul></p><p></p><p><h2>Endpoint Handling</h2></p><p>Web Apps are sometimes case-insensitive (e.g. redirecting you from <strong>/DiREctORy</strong> to <strong>/directory/</strong>), but APIs are almost always<span style="color:#ff0000;"> case-sensitive</span>.</p><p></p><p>If you <span style="color:#ff0000;">Request a Folder without</span> a trailing <strong><span style="color:#ff0000;">/</span></strong>, Web Apps typically redirect that Request (e.g. from  <strong>/directory</strong> to <strong>/directory/</strong>), but APIs won&#39;t &amp; will <span style="color:#ff0000;">give you a 404</span> instead.</p><p></p><p>APIs often return a 404 unless you Request the <span style="color:#ff0000;">full URI</span> to a valid endpoint (e.g. <strong>/api/</strong> gives 404, but <strong>/api/upload</strong> works).</p><p> </p><p><h2>Web App &amp; API Integration</h2></p><p>Sometimes you can bypass access controls (e.g. 403 Forbidden) by directly querying the API endpoint instead of going through the Web Server as intended.</p><p></p><p><h3>Example Implementation</h3></p><p>[CTF D 23-25]</p><p></p><p>An external port scan only showed an Apache Web Server, but on the Back End it was sending Requests to an API at 127.0.0.1:3000</p><p> </p><p><h1>Enumeration </h1><h1></h1></p><p><h1></h1>Use <span style="color:#ff0000;">CASE-SENSITIVE wordlists</span> like <a href="file:///usr/share/wordlists/seclists/Discovery/Web-Content/directory-list-2.3-medium.txt">/usr/share/wordlists/seclists/Discovery/Web-Content/directory-list-2.3-medium.txt</a><h1></h1></p><p><h1></h1><h1></h1></p><p><h1></h1><h2>Kiterunner</h2><h1></h1></p><p><h1></h1>[CTF 183]</p><p>Specifically designed to fuzz API endpoints, &amp; is better suited for this than ordinary tools like ffuf.</p><p>Specify number if concurrent requests to send with -x (can often use 5-10). Careful, it can easily crash target even with low number!</p><p></p><p>Should still <span style="color:#ff0000;">run ffuf to be safe</span>. Kiterunner seems to be less reliable overall, but it&#39;s still useful for quickly enumerating a large list of common endpoints.</p><p></p><p><em>kr scan http://192.168.211.144/cms/ -w=~/git/kiterunner/routes/routes-small.kite -x 7</em></p><p><h1></h1></p><p><h1>Postman</h1></p><p>Interact with various types of APIs. You can&#39;t always communicate properly with an API using a normal browser.</p></div>
</body>
</html>
